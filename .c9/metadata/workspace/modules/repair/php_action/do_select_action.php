{"filter":false,"title":"do_select_action.php","tooltip":"/modules/repair/php_action/do_select_action.php","undoManager":{"mark":43,"position":43,"stack":[[{"start":{"row":24,"column":12},"end":{"row":25,"column":12},"action":"insert","lines":["","            "],"id":2,"ignore":true}],[{"start":{"row":25,"column":12},"end":{"row":26,"column":12},"action":"insert","lines":["","            "],"id":3,"ignore":true}],[{"start":{"row":25,"column":12},"end":{"row":25,"column":13},"action":"insert","lines":["i"],"id":4,"ignore":true}],[{"start":{"row":25,"column":13},"end":{"row":25,"column":14},"action":"insert","lines":["f"],"id":5,"ignore":true}],[{"start":{"row":25,"column":14},"end":{"row":25,"column":16},"action":"insert","lines":["()"],"id":6,"ignore":true}],[{"start":{"row":25,"column":16},"end":{"row":25,"column":18},"action":"insert","lines":["{}"],"id":7,"ignore":true}],[{"start":{"row":29,"column":211},"end":{"row":29,"column":212},"action":"insert","lines":[" "],"id":8}],[{"start":{"row":29,"column":212},"end":{"row":29,"column":213},"action":"insert","lines":["A"],"id":9}],[{"start":{"row":29,"column":213},"end":{"row":29,"column":214},"action":"insert","lines":["N"],"id":10}],[{"start":{"row":29,"column":214},"end":{"row":29,"column":215},"action":"insert","lines":["D"],"id":11}],[{"start":{"row":29,"column":215},"end":{"row":29,"column":216},"action":"insert","lines":[" "],"id":12}],[{"start":{"row":25,"column":12},"end":{"row":25,"column":14},"action":"insert","lines":["//"],"id":13,"ignore":true}],[{"start":{"row":29,"column":216},"end":{"row":29,"column":237},"action":"insert","lines":["\tpublic_facilities_id"],"id":14}],[{"start":{"row":29,"column":216},"end":{"row":29,"column":217},"action":"remove","lines":["\t"],"id":15}],[{"start":{"row":29,"column":236},"end":{"row":29,"column":237},"action":"insert","lines":[" "],"id":16}],[{"start":{"row":29,"column":237},"end":{"row":29,"column":238},"action":"insert","lines":["="],"id":17}],[{"start":{"row":29,"column":238},"end":{"row":29,"column":239},"action":"insert","lines":[" "],"id":18}],[{"start":{"row":29,"column":239},"end":{"row":29,"column":240},"action":"insert","lines":["n"],"id":22}],[{"start":{"row":29,"column":240},"end":{"row":29,"column":241},"action":"insert","lines":["u"],"id":23}],[{"start":{"row":29,"column":241},"end":{"row":29,"column":242},"action":"insert","lines":["l"],"id":24}],[{"start":{"row":29,"column":242},"end":{"row":29,"column":243},"action":"insert","lines":["l"],"id":25}],[{"start":{"row":29,"column":211},"end":{"row":29,"column":243},"action":"remove","lines":[" AND public_facilities_id = null"],"id":26}],[{"start":{"row":29,"column":211},"end":{"row":29,"column":212},"action":"insert","lines":[" "],"id":27}],[{"start":{"row":29,"column":212},"end":{"row":29,"column":244},"action":"insert","lines":["AND public_facilities_id IS null"],"id":28}],[{"start":{"row":29,"column":140},"end":{"row":29,"column":165},"action":"insert","lines":[", household_user.warranty"],"id":29}],[{"start":{"row":23,"column":99},"end":{"row":23,"column":108},"action":"insert","lines":[",warranty"],"id":30}],[{"start":{"row":0,"column":0},"end":{"row":52,"column":2},"action":"remove","lines":["<?php","    require_once 'include/php/action_listener.php';","    require_once 'include/php/event_message.php';","    require_once 'include/php/PDO_mysql.php';","    require_once 'modules/household/php_action/household_model.php';","    require_once 'modules/repair/php_action/repair_model.php';","    require_once 'modules/case/php_action/case_model.php';","        ","    class do_select_action implements action_listener{","        public function actionPerformed(event_message $em) {","            $repair_model=new repair_model();","\t\t    $case_model= new case_model();","\t\t    $household_model= new household_model();","            // $conn = PDO_mysql::getConnection();","            // $sql = \"SELECT id,name,namech FROM `repair_type`\";","            // $post = $em->getPost();","            // $stmt = $conn->prepare($sql);","            // $result = $stmt->execute();","            if(isset($_SESSION['useracc'])){","\t\t\t    $userid=$_SESSION['userid'];","\t\t    }","            $repair_type=$case_model->get_something_from_repair_type(\"id,name,namech\",\"1\");","            //SELECT id,household_profile_id FROM `household_user` WHERE household_profile_id is not null AND user_profile_id = 1","            $household=$household_model->get_something_from_household_user(\"id,household_profile_id,warranty\",\"household_profile_id is not null AND user_profile_id = $userid\");","            ","            //if(){}","            if(sizeof($household)>1){","                //SELECT household_user.id, construction_project.name FROM `household_user` JOIN household_profile ON household_user.household_profile_id=household_profile.id JOIN construction_project ON household_profile.construction_project_id=construction_project.id WHERE household_profile_id is not null AND user_profile_id = 1","                $join=\"household_profile ON household_user.household_profile_id=household_profile.id JOIN construction_project ON household_profile.construction_project_id=construction_project.id\";","                $construction_project=$household_model->get_something_from_household_user_join(\"household_user.id, construction_project.name, household_user.warranty\",$join,\"household_profile_id is not null AND user_profile_id = $userid AND public_facilities_id IS null\");","                $return_value['check_construction']=\"yes\";","                $return_value['construction_data']=$construction_project;","            }else if(sizeof($household)==1){","                $return_value['check_construction']=\"no\";","            }else{","                $return_value['check_construction']=\"nonono\";","            }","            ","            if($repair_type){","                //$ds = $stmt->fetchAll(PDO::FETCH_ASSOC);","                $return_value['status_code'] = 0;","                $return_value['status_message'] = 'Execute Success';","                $return_value['data_set']=$repair_type;","                $return_value['user_id']=$_SESSION['user'];","            }","            else{","                $return_value['status_code'] = -1; ","                $return_value['sql'] = $sql;","            }","            return json_encode($return_value);","        }        ","    }","?>"],"id":31},{"start":{"row":0,"column":0},"end":{"row":69,"column":2},"action":"insert","lines":["<?php","    require_once 'include/php/action_listener.php';","    require_once 'include/php/event_message.php';","    require_once 'include/php/PDO_mysql.php';","    require_once 'modules/household/php_action/household_model.php';","    require_once 'modules/repair/php_action/repair_model.php';","    require_once 'modules/case/php_action/case_model.php';","        ","    class do_select_action implements action_listener{","        public function actionPerformed(event_message $em) {","            $repair_model=new repair_model();","\t\t    $case_model= new case_model();","\t\t    $household_model= new household_model();","            // $conn = PDO_mysql::getConnection();","            // $sql = \"SELECT id,name,namech FROM `repair_type`\";","            // $post = $em->getPost();","            // $stmt = $conn->prepare($sql);","            // $result = $stmt->execute();","            ","            $warrarr=array();","            ","            ","            if(isset($_SESSION['useracc'])){","\t\t\t    $userid=$_SESSION['userid'];","\t\t    }","            $repair_type=$case_model->get_something_from_repair_type(\"id,name,namech\",\"1\");","            //SELECT id,household_profile_id FROM `household_user` WHERE household_profile_id is not null AND user_profile_id = 1","            $household=$household_model->get_something_from_household_user(\"id,household_profile_id,warranty\",\"household_profile_id is not null AND user_profile_id = $userid\");","            if(sizeof($household)>1){","                //SELECT household_user.id, construction_project.name FROM `household_user` JOIN household_profile ON household_user.household_profile_id=household_profile.id JOIN construction_project ON household_profile.construction_project_id=construction_project.id WHERE household_profile_id is not null AND user_profile_id = 1","                $join=\"household_profile ON household_user.household_profile_id=household_profile.id JOIN construction_project ON household_profile.construction_project_id=construction_project.id\";","                $construction_project=$household_model->get_something_from_household_user_join(\"household_user.id, construction_project.name, household_user.warranty\",$join,\"household_profile_id is not null AND user_profile_id = $userid\");","                $return_value['check_construction']=\"yes\";","                $return_value['construction_data']=$construction_project;","                ","                ","                for($i=0;$i<sizeof($household);$i++){","                    array_push($warrarr,$construction_project[$i][\"warranty\"]);","                    ","                }","                ","                ","                $return_value['warranty']=$warrarr;","                ","            }else if(sizeof($household)==1){","                $return_value['check_construction']=\"no\";","                $return_value['warranty']=$household[0][\"warranty\"];","                ","            }else{","                $return_value['check_construction']=\"nonono\";","                $return_value['warranty']=\"nowarranty\";","            }","            ","            if($repair_type){","                //$ds = $stmt->fetchAll(PDO::FETCH_ASSOC);","                $return_value['status_code'] = 0;","                $return_value['status_message'] = 'Execute Success';","                $return_value['data_set']=$repair_type;","                $return_value['user_id']=$_SESSION['user'];","                ","                ","            }","            else{","                $return_value['status_code'] = -1; ","                $return_value['sql'] = $sql;","            }","            return json_encode($return_value);","        }        ","    }","?>"]}],[{"start":{"row":38,"column":16},"end":{"row":39,"column":16},"action":"remove","lines":["    ","                "],"id":32}],[{"start":{"row":34,"column":12},"end":{"row":34,"column":16},"action":"remove","lines":["    "],"id":33}],[{"start":{"row":34,"column":8},"end":{"row":34,"column":12},"action":"remove","lines":["    "],"id":34}],[{"start":{"row":34,"column":4},"end":{"row":34,"column":8},"action":"remove","lines":["    "],"id":35}],[{"start":{"row":34,"column":0},"end":{"row":34,"column":4},"action":"remove","lines":["    "],"id":36}],[{"start":{"row":33,"column":73},"end":{"row":34,"column":0},"action":"remove","lines":["",""],"id":37}],[{"start":{"row":39,"column":12},"end":{"row":39,"column":16},"action":"remove","lines":["    "],"id":38}],[{"start":{"row":39,"column":8},"end":{"row":39,"column":12},"action":"remove","lines":["    "],"id":39}],[{"start":{"row":39,"column":4},"end":{"row":39,"column":8},"action":"remove","lines":["    "],"id":40}],[{"start":{"row":39,"column":0},"end":{"row":39,"column":4},"action":"remove","lines":["    "],"id":41}],[{"start":{"row":38,"column":16},"end":{"row":39,"column":0},"action":"remove","lines":["",""],"id":42}],[{"start":{"row":38,"column":12},"end":{"row":38,"column":16},"action":"remove","lines":["    "],"id":43}],[{"start":{"row":38,"column":8},"end":{"row":38,"column":12},"action":"remove","lines":["    "],"id":44}],[{"start":{"row":38,"column":4},"end":{"row":38,"column":8},"action":"remove","lines":["    "],"id":45}],[{"start":{"row":38,"column":0},"end":{"row":38,"column":4},"action":"remove","lines":["    "],"id":46}],[{"start":{"row":37,"column":17},"end":{"row":38,"column":0},"action":"remove","lines":["",""],"id":47}],[{"start":{"row":0,"column":0},"end":{"row":65,"column":2},"action":"remove","lines":["<?php","    require_once 'include/php/action_listener.php';","    require_once 'include/php/event_message.php';","    require_once 'include/php/PDO_mysql.php';","    require_once 'modules/household/php_action/household_model.php';","    require_once 'modules/repair/php_action/repair_model.php';","    require_once 'modules/case/php_action/case_model.php';","        ","    class do_select_action implements action_listener{","        public function actionPerformed(event_message $em) {","            $repair_model=new repair_model();","\t\t    $case_model= new case_model();","\t\t    $household_model= new household_model();","            // $conn = PDO_mysql::getConnection();","            // $sql = \"SELECT id,name,namech FROM `repair_type`\";","            // $post = $em->getPost();","            // $stmt = $conn->prepare($sql);","            // $result = $stmt->execute();","            ","            $warrarr=array();","            ","            ","            if(isset($_SESSION['useracc'])){","\t\t\t    $userid=$_SESSION['userid'];","\t\t    }","            $repair_type=$case_model->get_something_from_repair_type(\"id,name,namech\",\"1\");","            //SELECT id,household_profile_id FROM `household_user` WHERE household_profile_id is not null AND user_profile_id = 1","            $household=$household_model->get_something_from_household_user(\"id,household_profile_id,warranty\",\"household_profile_id is not null AND user_profile_id = $userid\");","            if(sizeof($household)>1){","                //SELECT household_user.id, construction_project.name FROM `household_user` JOIN household_profile ON household_user.household_profile_id=household_profile.id JOIN construction_project ON household_profile.construction_project_id=construction_project.id WHERE household_profile_id is not null AND user_profile_id = 1","                $join=\"household_profile ON household_user.household_profile_id=household_profile.id JOIN construction_project ON household_profile.construction_project_id=construction_project.id\";","                $construction_project=$household_model->get_something_from_household_user_join(\"household_user.id, construction_project.name, household_user.warranty\",$join,\"household_profile_id is not null AND user_profile_id = $userid\");","                $return_value['check_construction']=\"yes\";","                $return_value['construction_data']=$construction_project;","                ","                for($i=0;$i<sizeof($household);$i++){","                    array_push($warrarr,$construction_project[$i][\"warranty\"]);","                }","                $return_value['warranty']=$warrarr;","                ","            }else if(sizeof($household)==1){","                $return_value['check_construction']=\"no\";","                $return_value['warranty']=$household[0][\"warranty\"];","                ","            }else{","                $return_value['check_construction']=\"nonono\";","                $return_value['warranty']=\"nowarranty\";","            }","            ","            if($repair_type){","                //$ds = $stmt->fetchAll(PDO::FETCH_ASSOC);","                $return_value['status_code'] = 0;","                $return_value['status_message'] = 'Execute Success';","                $return_value['data_set']=$repair_type;","                $return_value['user_id']=$_SESSION['user'];","                ","                ","            }","            else{","                $return_value['status_code'] = -1; ","                $return_value['sql'] = $sql;","            }","            return json_encode($return_value);","        }        ","    }","?>"],"id":48},{"start":{"row":0,"column":0},"end":{"row":69,"column":2},"action":"insert","lines":["<?php","    require_once 'include/php/action_listener.php';","    require_once 'include/php/event_message.php';","    require_once 'include/php/PDO_mysql.php';","    require_once 'modules/household/php_action/household_model.php';","    require_once 'modules/repair/php_action/repair_model.php';","    require_once 'modules/case/php_action/case_model.php';","        ","    class do_select_action implements action_listener{","        public function actionPerformed(event_message $em) {","            $repair_model=new repair_model();","\t\t    $case_model= new case_model();","\t\t    $household_model= new household_model();","            // $conn = PDO_mysql::getConnection();","            // $sql = \"SELECT id,name,namech FROM `repair_type`\";","            // $post = $em->getPost();","            // $stmt = $conn->prepare($sql);","            // $result = $stmt->execute();","            ","            $warrarr=array();","            ","            ","            if(isset($_SESSION['useracc'])){","\t\t\t    $userid=$_SESSION['userid'];","\t\t    }","            $repair_type=$case_model->get_something_from_repair_type(\"id,name,namech\",\"1\");","            //SELECT id,household_profile_id FROM `household_user` WHERE household_profile_id is not null AND user_profile_id = 1","            $household=$household_model->get_something_from_household_user(\"id,household_profile_id,warranty\",\"household_profile_id is not null AND user_profile_id = $userid\");","            if(sizeof($household)>1){","                //SELECT household_user.id, construction_project.name FROM `household_user` JOIN household_profile ON household_user.household_profile_id=household_profile.id JOIN construction_project ON household_profile.construction_project_id=construction_project.id WHERE household_profile_id is not null AND user_profile_id = 1","                $join=\"household_profile ON household_user.household_profile_id=household_profile.id JOIN construction_project ON household_profile.construction_project_id=construction_project.id\";","                $construction_project=$household_model->get_something_from_household_user_join(\"household_user.id, construction_project.name, household_user.warranty\",$join,\"household_profile_id is not null AND user_profile_id = $userid\");","                $return_value['check_construction']=\"yes\";","                $return_value['construction_data']=$construction_project;","                ","                ","                for($i=0;$i<sizeof($household);$i++){","                    array_push($warrarr,$construction_project[$i]);","                    ","                }","                ","                ","                $return_value['warrantyall']=$warrarr;","                ","            }else if(sizeof($household)==1){","                $return_value['check_construction']=\"no\";","                $return_value['warranty']=$household[0][\"warranty\"];","                ","            }else{","                $return_value['check_construction']=\"nonono\";","                $return_value['warranty']=\"nowarranty\";","            }","            ","            if($repair_type){","                //$ds = $stmt->fetchAll(PDO::FETCH_ASSOC);","                $return_value['status_code'] = 0;","                $return_value['status_message'] = 'Execute Success';","                $return_value['data_set']=$repair_type;","                $return_value['user_id']=$_SESSION['user'];","                ","                ","            }","            else{","                $return_value['status_code'] = -1; ","                $return_value['sql'] = $sql;","            }","            return json_encode($return_value);","        }        ","    }","?>"]}]]},"ace":{"folds":[],"scrolltop":240,"scrollleft":0,"selection":{"start":{"row":69,"column":2},"end":{"row":69,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":33,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1544116762872,"hash":"d8262eeec1d243f88100e9558fa7e0d3c1b719f3"}