{"changed":true,"filter":false,"title":"do_update_action_P.php","tooltip":"/modules/building/php_action/do_update_action_P.php","value":"<?php\n    require_once 'include/php/action_listener.php';\n    require_once 'include/php/event_message.php';\n    require_once 'modules/building/php_action/building_model.php';\n\n    \n    class do_update_action_P implements action_listener{\n        public function actionPerformed(event_message $em) {\n            $post = $em->getPost();\n            $housepid=$post['housepid'];\n            $housepnum=$post['num'];\n            $housepadd=$post['add'];\n            $houseflow=$post['flow'];\n            $test_test=$post['test_test'];\n            $household = new household_model();\n                $sm = $household->update_household_profile_P($housepid,$housepnum,$housepadd,$houseflow);\n            \n            if($test_test!=\"null\"){\n                $ym = $household->insert_household_user_P($test_test,$housepid);\n            }else{\n                $ym=true;\n            }\n             if($sm){\n                $return_value['status_code'] = 0;\n                $return_value['sm']=$sm;\n                $return_value['ym']=$ym;\n                // $return_value['1']=$housepid;\n                // $return_value['2']=$housepnum;\n                // $return_value['3']=$housepadd;\n                // $return_value['4']=$houseflow;\n            }\n            else{\n                $return_value['status_code'] = -1;\n                $return_value['status_message'] = 'error';\n                $return_value['sql'] = $sm;\n            }\n            return json_encode($return_value);\n        }        \n    }\n?>","undoManager":{"mark":-2,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":39,"column":2},"action":"insert","lines":["<?php","    require_once 'include/php/action_listener.php';","    require_once 'include/php/event_message.php';","    require_once 'modules/household/php_action/household_model.php';","","    ","    class do_update_action_P implements action_listener{","        public function actionPerformed(event_message $em) {","            $post = $em->getPost();","            $housepid=$post['housepid'];","            $housepnum=$post['num'];","            $housepadd=$post['add'];","            $houseflow=$post['flow'];","            $test_test=$post['test_test'];","            $household = new household_model();","                $sm = $household->update_household_profile_P($housepid,$housepnum,$housepadd,$houseflow);","            ","            if($test_test!=\"null\"){","                $ym = $household->insert_household_user_P($test_test,$housepid);","            }else{","                $ym=true;","            }","             if($sm){","                $return_value['status_code'] = 0;","                $return_value['sm']=$sm;","                $return_value['ym']=$ym;","                // $return_value['1']=$housepid;","                // $return_value['2']=$housepnum;","                // $return_value['3']=$housepadd;","                // $return_value['4']=$houseflow;","            }","            else{","                $return_value['status_code'] = -1;","                $return_value['status_message'] = 'error';","                $return_value['sql'] = $sm;","            }","            return json_encode($return_value);","        }        ","    }","?>"],"id":1}],[{"start":{"row":3,"column":17},"end":{"row":3,"column":68},"action":"remove","lines":["'modules/household/php_action/household_model.php';"],"id":2},{"start":{"row":3,"column":17},"end":{"row":3,"column":66},"action":"insert","lines":["'modules/building/php_action/building_model.php';"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":3,"column":66},"end":{"row":3,"column":66},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1545659201614}